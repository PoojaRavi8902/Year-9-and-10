<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>IGCSE 0478 — Data representation: Number systems (Binary, Denary, Hex)</title>
<style>
  :root{
    --bg:#f7f9fb; --card:#ffffff; --muted:#5b6b77; --accent:#0b6efd; --success:#198754;
    --mono-bg:#0f1720; --mono-fg:#e6eef6;
    --maxwidth:1100px;
  }
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial; background:var(--bg); color:#112; margin:0; padding:28px; line-height:1.5;}
  .wrap{max-width:var(--maxwidth); margin:0 auto;}
  header {display:flex; gap:16px; align-items:center; margin-bottom:20px; flex-direction:column; text-align:center;}
  header h1{margin:0; font-size:1.6rem;}
  header p{margin:0; color:var(--muted); font-size:0.95rem; font-weight:600;}
  .card{background:var(--card); border-radius:10px; padding:18px; box-shadow:0 6px 18px rgba(17,27,36,0.06); margin-bottom:18px;}
  h2{margin-top:0; color:var(--accent);}
  .lead{color:var(--muted);}
  .grid{display:grid; grid-template-columns: 1fr; gap:12px;}
  @media(min-width:900px){ .grid-cols-2{grid-template-columns: 1fr 380px;} }
  pre {background:#0b1220; color:#d7eaf9; padding:12px; border-radius:6px; overflow:auto; font-size:0.9rem;}
  table{width:100%; border-collapse:collapse; margin:8px 0;}
  th,td{padding:6px 8px; border:1px solid #e6eef6; text-align:center; font-family:monospace;}
  th{background:#f1f6ff; color:#0b3b83;}
  .explain{background:#f3f6fb; padding:10px; border-radius:6px; color:#243242;}
  .controls{display:flex; gap:8px; flex-wrap:wrap; margin-top:8px;}
  input[type="text"], input[type="number"]{padding:8px; border-radius:6px; border:1px solid #dfe7ee; min-width:140px;}
  button{background:var(--accent); color:white; border:none; padding:8px 12px; border-radius:6px; cursor:pointer;}
  button.secondary{background:#6c757d;}
  .result{margin-top:8px; padding:10px; border-radius:6px; font-weight:600;}
  .ok{background:#e8f8f0; color:var(--success); border:1px solid rgba(25,135,84,0.12);}
  .err{background:#fff5f6; color:#b32b2b; border:1px solid rgba(179,43,43,0.08);}
  .example{background:#fff; padding:12px; border-left:4px solid #0b6efd; border-radius:6px; margin:8px 0;}
  .activity li{margin:6px 0;}
  .small{font-size:0.9rem; color:var(--muted);}
  .flex{display:flex; gap:12px; align-items:center; flex-wrap:wrap;}
  .color-swatch{display:inline-block; width:60px; height:36px; border-radius:6px; border:1px solid rgba(0,0,0,0.06); vertical-align:middle;}
  code{background:#f1f8ff; padding:2px 6px; border-radius:4px; font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", monospace;}
  footer{margin-top:18px; color:var(--muted); font-size:0.9rem; text-align:center;}
  .hint{font-size:0.9rem; color:#475569;}
  .toggle-answer{background:#f1f5f9; padding:8px 10px; border-radius:6px; cursor:pointer;}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div>
      <h1>IGCSE 0478 — Data representation: Number systems (1.1)</h1>
      <p class="lead">Prepared by Ravi Raju</p>
    </div>
  </header>

  <!-- Intro -->
  <section class="card">
    <h2>1.1 Overview — Why number systems matter</h2>
    <p class="explain">
      Computers fundamentally use <strong>binary</strong> because their physical components (transistors/switches) have two stable states: ON and OFF. We represent ON with <code>1</code> and OFF with <code>0</code>. All types of data (text, images, sound, instructions) must be encoded as binary before being stored or processed by a computer.
    </p>
    <p class="small">This section covers:</p>
    <ul>
      <li>Binary (base 2) — explanation, place values, converting to/from denary</li>
      <li>Denary (base 10) — what students already know</li>
      <li>Hexadecimal (base 16) — why it is convenient for humans, link to binary</li>
      <li>Practical uses: error codes, MAC addresses, IPv6, HTML colour codes</li>
    </ul>
  </section>

  <!-- Binary basics -->
  <section class="card">
    <h2>1.1.1 Binary represents data — place values and examples</h2>

    <div class="grid grid-cols-2">
      <div>
        <p>Binary is <strong>base 2</strong>. Each bit (binary digit) column is a power of 2. For an 8-bit number the place values are:</p>
        <table><thead><tr><th>2⁷</th><th>2⁶</th><th>2⁵</th><th>2⁴</th><th>2³</th><th>2²</th><th>2¹</th><th>2⁰</th></tr></thead>
        <tbody><tr><td>128</td><td>64</td><td>32</td><td>16</td><td>8</td><td>4</td><td>2</td><td>1</td></tr></tbody></table>

        <p class="example"><strong>Example:</strong> Binary <code>11101110</code> → Denary: add the place values with 1s:
          128 + 64 + 32 + 8 + 4 + 2 = <strong>238</strong>.</p>

        <h3>How to convert binary → denary (step-by-step)</h3>
        <ol>
          <li>Write the binary digits above the place values (right-aligned).</li>
          <li>For every 1, add that place value to a running total.</li>
          <li>The final total is the denary equivalent.</li>
        </ol>

        <h3>Worked examples</h3>
        <div class="example">
          <strong>011110001011 (12-bit)</strong><br>
          Place values: 2048 1024 512 256 128 64 32 16 8 4 2 1<br>
          Bits:           0    1   1   1   1   0  0  0 1 0 1 1 → add 1024+512+256+128+8+2+1 = <strong>1931</strong>.
        </div>

        <div class="example">
          <strong>0011000111100110 (16-bit)</strong><br>
          adding place values for each 1 gives: 8192 + 4096 + 256 + 128 + 64 + 32 + 4 + 2 = <strong>12,774</strong>.
        </div>
      </div>

      <aside class="card" style="margin:0;">
        <h3>Interactive: Binary → Denary</h3>
        <div>
          <label><small>Enter a binary number (e.g. 11101110)</small>
            <input id="binToDecIn" type="text" placeholder="Enter binary" />
          </label>
          <div class="controls">
            <button onclick="binToDec()">Convert</button>
            <button class="secondary" onclick="document.getElementById('binToDecIn').value='';document.getElementById('binToDecOut').textContent='';">Clear</button>
          </div>
          <div id="binToDecOut" class="result" style="display:block; margin-top:10px;"></div>
          <p class="small hint">This tool will validate non-binary characters and ignore leading spaces.</p>
        </div>
      </aside>
    </div>
  </section>

  <!-- Converting denary to binary -->
  <section class="card">
    <h2>Converting denary → binary (two methods)</h2>

    <h3>Method 1: Successive subtraction of powers of 2</h3>
    <p>Find the largest power of 2 ≤ the denary number, subtract it, put a 1 in that column, and repeat until you reach 0. Pad with leading zeros to desired bit width (e.g. 8-bit).</p>

    <div class="example">
      <strong>Example — 142 → binary (8-bit)</strong><br>
      142 − 128 = 14 → mark 1 at 128. 14 − 8 = 6 → mark 1 at 8. 6 − 4 = 2 → mark 1 at 4. 2 − 2 = 0 → mark 1 at 2.<br>
      Bits (128 64 32 16 8 4 2 1): <strong>1 0 0 0 1 1 1 0</strong> → <code>10001110</code>.
    </div>

    <h3>Method 2: Successive division by 2 (remainder method)</h3>
    <p>Divide the number by 2 repeatedly, record each remainder, and then read the remainders bottom → top to get the binary number.</p>

    <div class="example">
      <strong>Example — 59 → binary</strong><br>
      59 ÷ 2 = 29 r1; 29 ÷ 2 = 14 r1; 14 ÷ 2 = 7 r0; 7 ÷ 2 = 3 r1; 3 ÷ 2 = 1 r1; 1 ÷ 2 = 0 r1 → remainders bottom→top: 111011 → pad to 8 bits: <code>00111011</code>.
    </div>

    <div class="grid grid-cols-2">
      <div>
        <h3>Interactive: Denary → Binary</h3>
        <label><small>Enter a non-negative integer (e.g. 142)</small>
          <input id="decToBinIn" type="number" min="0" placeholder="Enter denary" />
        </label>
        <div class="controls">
          <button onclick="decToBin()">Convert</button>
          <button class="secondary" onclick="document.getElementById('decToBinIn').value='';document.getElementById('decToBinOut').textContent='';document.getElementById('decToBinSteps').textContent='';">Clear</button>
        </div>
        <div id="decToBinOut" class="result" style="display:block;"></div>
        <pre id="decToBinSteps" style="display:none;"></pre>
        <label><input type="checkbox" id="showDivSteps" onchange="toggleDivSteps()" /> Show division remainders (Method 2)</label>
      </div>

      <aside class="card" style="margin:0;">
        <h3>Why both methods?</h3>
        <p class="small">Method 1 (subtraction) is easier to show place-value thinking. Method 2 (division) is algorithmic and easy to implement in code — both are useful to teach.</p>
      </aside>
    </div>
  </section>

  <!-- Hex -->
  <section class="card">
    <h2>Hexadecimal (hex) — base 16</h2>
    <p>
      Hex uses sixteen digits: <code>0–9</code> and <code>A–F</code> (A=10 ... F=15). Each hex digit represents exactly 4 binary bits (because 16 = 2⁴). Hex is convenient for humans to read or write long binary values.
    </p>

    <h3>Binary ↔ Hex mapping (4-bit groups)</h3>
    <table>
      <thead><tr><th>Binary</th><th>Hex</th><th>Denary</th></tr></thead>
      <tbody>
        <tr><td>0000</td><td>0</td><td>0</td></tr>
        <tr><td>0001</td><td>1</td><td>1</td></tr>
        <tr><td>0010</td><td>2</td><td>2</td></tr>
        <tr><td>0011</td><td>3</td><td>3</td></tr>
        <tr><td>0100</td><td>4</td><td>4</td></tr>
        <tr><td>0101</td><td>5</td><td>5</td></tr>
        <tr><td>0110</td><td>6</td><td>6</td></tr>
        <tr><td>0111</td><td>7</td><td>7</td></tr>
        <tr><td>1000</td><td>8</td><td>8</td></tr>
        <tr><td>1001</td><td>9</td><td>9</td></tr>
        <tr><td>1010</td><td>A</td><td>10</td></tr>
        <tr><td>1011</td><td>B</td><td>11</td></tr>
        <tr><td>1100</td><td>C</td><td>12</td></tr>
        <tr><td>1101</td><td>D</td><td>13</td></tr>
        <tr><td>1110</td><td>E</td><td>14</td></tr>
        <tr><td>1111</td><td>F</td><td>15</td></tr>
      </tbody>
    </table>

    <h3>How to convert Binary → Hex</h3>
    <ol>
      <li>Group the binary number into 4-bit blocks starting from the right.</li>
      <li>If the left-most block has fewer than 4 bits, pad with zeros on the left.</li>
      <li>Convert each 4-bit block to its hex digit using the table above.</li>
    </ol>

    <div class="example">
      <strong>Example — 101111100001 → groups: 1011 1110 0001 → hex: B E 1 → <code>BE1</code>.</strong>
    </div>

    <h3>How to convert Hex → Binary</h3>
    <p>Replace each hex digit with its 4-bit binary equivalent (using the table).</p>

    <div class="grid grid-cols-2">
      <div>
        <h3>Interactive: Binary ↔ Hex & Denary ↔ Hex</h3>
        <label><small>Binary → Hex</small><input id="binToHexIn" type="text" placeholder="Enter binary" /></label>
        <div class="controls">
          <button onclick="binToHex()">Convert B→H</button>
          <button class="secondary" onclick="document.getElementById('binToHexIn').value='';document.getElementById('binToHexOut').textContent='';">Clear</button>
        </div>
        <div id="binToHexOut" class="result"></div>

        <label style="margin-top:8px;"><small>Hex → Binary</small><input id="hexToBinIn" type="text" placeholder="Enter hex (e.g. D2AF)" /></label>
        <div class="controls">
          <button onclick="hexToBin()">Convert H→B</button>
          <button class="secondary" onclick="document.getElementById('hexToBinIn').value='';document.getElementById('hexToBinOut').textContent='';">Clear</button>
        </div>
        <div id="hexToBinOut" class="result"></div>

        <label style="margin-top:8px;"><small>Denary → Hex</small><input id="decToHexIn" type="number" placeholder="Enter denary" /></label>
        <div class="controls">
          <button onclick="decToHex()">Convert D→H</button>
          <button class="secondary" onclick="document.getElementById('decToHexIn').value='';document.getElementById('decToHexOut').textContent='';">Clear</button>
        </div>
        <div id="decToHexOut" class="result"></div>

        <label style="margin-top:8px;"><small>Hex → Denary</small><input id="hexToDecIn" type="text" placeholder="Enter hex" /></label>
        <div class="controls">
          <button onclick="hexToDec()">Convert H→D</button>
          <button class="secondary" onclick="document.getElementById('hexToDecIn').value='';document.getElementById('hexToDecOut').textContent='';">Clear</button>
        </div>
        <div id="hexToDecOut" class="result"></div>
      </div>

      <aside class="card" style="margin:0;">
        <h3>Why hex?</h3>
        <p class="small">Hex compresses groups of four bits into a single digit, making long binary sequences easier for humans to read and write. Example: 1101001010101111 → <strong>D2AF</strong>.</p>
      </aside>
    </div>
  </section>

  <!-- Uses -->
  <section class="card">
    <h2>1.1.3 Practical uses of hexadecimal</h2>
    <ul>
      <li><strong>Error codes</strong> — many systems display memory locations or error identifiers in hex (shorter and more human-readable).</li>
      <li><strong>MAC addresses</strong> — usually shown as 6 groups of two hex digits (48-bit). Example: <code>00-1C-B3-4F-25-FE</code>. Vendor part usually encoded in the first three bytes.</li>
      <li><strong>IP addresses</strong> — IPv4 commonly shown in dotted decimal (e.g. 109.108.158.1); IPv6 is hexadecimal groups separated by colons (128-bit): <code>a8fb:7a88:fff0:0fff:3d21:2085:66fb:f0fa</code>.</li>
      <li><strong>HTML colour codes</strong> — colours are written as <code>#RRGGBB</code> where each RR, GG, BB is a hex value 00–FF (0–255). Example: <code>#FF9966</code>.</li>
    </ul>

    <div class="flex">
      <div>
        <div class="small">Type a hex color code (without #) to preview:</div>
        <input id="colorIn" type="text" maxlength="6" placeholder="e.g. FF9966" />
        <button onclick="previewColor()">Preview</button>
        <div id="colorBox" class="color-swatch" style="margin-left:10px; display:inline-block; vertical-align:middle;"></div>
        <div id="colorInfo" class="small" style="margin-top:8px;"></div>
      </div>

      <div style="margin-left:auto;">
        <div class="small">Examples:</div>
        <div style="display:flex; gap:8px; margin-top:6px;">
          <div><div class="color-swatch" style="background:#FF0000;"></div><div class="small">#FF0000 (red)</div></div>
          <div><div class="color-swatch" style="background:#00FF00;"></div><div class="small">#00FF00 (green)</div></div>
          <div><div class="color-swatch" style="background:#0000FF;"></div><div class="small">#0000FF (blue)</div></div>
        </div>
      </div>
    </div>
  </section>

  <!-- Activities -->
  <section class="card">
    <h2>Activities and practice (auto-check)</h2>
    <p class="small">Use the boxes to type your answers. Click <strong>Check</strong> to see if they match the correct answers.</p>

    <div>
      <h3>Activity 1.1 — Convert binary → denary</h3>
      <ol class="activity">
        <li>a) <code>00110011</code> = <input id="act1a" type="text" placeholder="enter denary" /> <button onclick="check('act1a', 51)">Check</button> <span id="act1a_out" class="small"></span></li>
        <li>b) <code>01111111</code> = <input id="act1b" type="text" placeholder="127" /> <button onclick="check('act1b', 127)">Check</button> <span id="act1b_out" class="small"></span></li>
        <li>c) <code>10011001</code> = <input id="act1c" type="text" /> <button onclick="check('act1c', 153)">Check</button> <span id="act1c_out" class="small"></span></li>
        <li>d) <code>01110100</code> = <input id="act1d" type="text" /> <button onclick="check('act1d', 116)">Check</button> <span id="act1d_out" class="small"></span></li>
        <li>e) <code>11111111</code> = <input id="act1e" type="text" /> <button onclick="check('act1e', 255)">Check</button> <span id="act1e_out" class="small"></span></li>
      </ol>
    </div>

    <div style="margin-top:12px;">
      <h3>Activity 1.2 — Convert denary → binary (8-bit)</h3>
      <ol class="activity">
        <li>a) 41 = <input id="act2a" type="text" /> <button onclick="check('act2a', '00101001')">Check</button> <span id="act2a_out" class="small"></span></li>
        <li>b) 67 = <input id="act2b" type="text" /> <button onclick="check('act2b', '01000011')">Check</button> <span id="act2b_out" class="small"></span></li>
        <li>c) 86 = <input id="act2c" type="text" /> <button onclick="check('act2c', '01010110')">Check</button> <span id="act2c_out" class="small"></span></li>
      </ol>
    </div>

    <div style="margin-top:12px;">
      <h3>Activity 1.3 — Binary → Hex</h3>
      <ol class="activity">
        <li>a) <code>11000011</code> = <input id="act3a" /> <button onclick="check('act3a','C3')">Check</button> <span id="act3a_out" class="small"></span></li>
        <li>b) <code>11110111</code> = <input id="act3b" /> <button onclick="check('act3b','F7')">Check</button> <span id="act3b_out" class="small"></span></li>
      </ol>
    </div>

    <div style="margin-top:12px;">
      <h3>Activity 1.4 — Hex → Binary</h3>
      <ol class="activity">
        <li>a) <code>6C</code> = <input id="act4a" /> <button onclick="check('act4a','01101100')">Check</button> <span id="act4a_out" class="small"></span></li>
        <li>b) <code>59</code> = <input id="act4b" /> <button onclick="check('act4b','01011001')">Check</button> <span id="act4b_out" class="small"></span></li>
      </ol>
    </div>

    <div style="margin-top:12px;">
      <h3>Activity 1.5 — Hex → Denary</h3>
      <ol class="activity">
        <li>a) <code>6B</code> = <input id="act5a" /> <button onclick="check('act5a', 107)">Check</button> <span id="act5a_out" class="small"></span></li>
        <li>b) <code>9C</code> = <input id="act5b" /> <button onclick="check('act5b', 156)">Check</button> <span id="act5b_out" class="small"></span></li>
      </ol>
    </div>

    <div style="margin-top:12px;">
      <h3>Activity 1.6 — Denary → Hex</h3>
      <ol class="activity">
        <li>a) 98 = <input id="act6a" /> <button onclick="check('act6a','62')">Check</button> <span id="act6a_out" class="small"></span></li>
        <li>b) 227 = <input id="act6b" /> <button onclick="check('act6b','E3')">Check</button> <span id="act6b_out" class="small"></span></li>
      </ol>
    </div>

    <div class="small" style="margin-top:8px;">Tip: For teacher answer keys — the script below includes truth values. You can also show/hide solution boxes if you want to give students a hint only after an attempt.</div>
  </section>

  <!-- Removed Note for teachers as requested -->

</div>

<script>
/* ---------- Utility helpers ---------- */
function isBinaryString(s){return /^[01]+$/.test(s.trim());}
function isHexString(s){return /^[0-9a-fA-F]+$/.test(s.trim());}
function hexDigitToDec(ch){if(!isNaN(ch)) return Number(ch); return {'A':10,'B':11,'C':12,'D':13,'E':14,'F':15}[ch.toUpperCase()];}
function decToHexString(n){ if(n===0) return '0'; let out=''; while(n>0){let r=n%16; out=(r<10?String(r):'ABCDEF'[r-10])+out; n=Math.floor(n/16);} return out;}
function decToBinString(n){ if(n===0) return '0'; let out=''; while(n>0){ out = (n%2) + out; n=Math.floor(n/2);} return out; }

/* ---------- Binary -> Denary ---------- */
function binToDec(){
  const el=document.getElementById('binToDecIn'), out=document.getElementById('binToDecOut');
  let s=el.value.trim();
  if(!s){ out.textContent='Enter a binary number.'; out.className='result err'; return; }
  s = s.replace(/\s+/g,''); // remove spaces
  if(!isBinaryString(s)){ out.textContent='Invalid binary input — only 0s and 1s allowed.'; out.className='result err'; return; }
  // compute
  let total=0;
  for(let i=0;i<s.length;i++){
    if(s[s.length-1-i]==='1') total += Math.pow(2,i);
  }
  out.textContent = `Binary ${s} = Denary ${total}`;
  out.className='result ok';
}

/* ---------- Denary -> Binary (two methods shown) ---------- */
function decToBin(){
  const val=document.getElementById('decToBinIn').value;
  const out=document.getElementById('decToBinOut'), steps=document.getElementById('decToBinSteps');
  if(val==='' || isNaN(Number(val)) || Number(val)<0){ out.textContent='Enter a non-negative integer.'; out.className='result err'; steps.style.display='none'; return; }
  let n = Math.floor(Number(val));
  // Method 2: repeated division
  if(n===0){ out.textContent='Denary 0 = Binary 0'; out.className='result ok'; steps.style.display='none'; return;}
  let rems=[], temp=n;
  while(temp>0){ rems.push(temp%2); temp = Math.floor(temp/2); }
  let bin = rems.slice().reverse().join('');
  out.textContent = `Denary ${n} = Binary ${bin}`;
  out.className='result ok';
  if(document.getElementById('showDivSteps').checked){
    steps.style.display='block';
    steps.textContent = 'Division steps (denary ÷ 2 → remainder):\\n';
    let t=n;
    while(t>0){ steps.textContent += `${t} ÷ 2 = ${Math.floor(t/2)} r ${t%2}\\n`; t=Math.floor(t/2); }
    steps.textContent += '\\nRemainders bottom → top form the binary number: ' + bin;
  } else { steps.style.display='none'; }
}
function toggleDivSteps(){ if(document.getElementById('decToBinIn').value) decToBin(); }

/* ---------- Binary -> Hex ---------- */
function binToHex(){
  const inEl=document.getElementById('binToHexIn'), out=document.getElementById('binToHexOut');
  let s=inEl.value.replace(/\s+/g,'').toUpperCase();
  if(!s){out.textContent='Enter a binary value.'; out.className='result err'; return;}
  if(!isBinaryString(s)){out.textContent='Invalid binary — only 0 and 1 allowed.'; out.className='result err'; return;}
  // pad to multiple of 4
  let pad = (4 - (s.length % 4)) % 4;
  s = '0'.repeat(pad) + s;
  let hex='';
  for(let i=0;i<s.length;i+=4){
    let nib = s.substr(i,4);
    let dec = parseInt(nib,2);
    hex += dec<10?''+dec: 'ABCDEF'[dec-10];
  }
  out.textContent = `Binary → Hex: ${hex}`;
  out.className='result ok';
}

/* ---------- Hex -> Binary ---------- */
function hexToBin(){
  const inEl=document.getElementById('hexToBinIn'), out=document.getElementById('hexToBinOut');
  let s=inEl.value.trim().toUpperCase();
  if(!s){out.textContent='Enter a hex value.'; out.className='result err'; return;}
  if(!isHexString(s)){out.textContent='Invalid hex — use 0-9 and A-F.'; out.className='result err'; return;}
  let bin='';
  for(let ch of s){
    let dec = hexDigitToDec(ch.toUpperCase());
    let nib = dec.toString(2).padStart(4,'0');
    bin += nib;
  }
  out.textContent = `Hex ${s} → Binary ${bin}`;
  out.className='result ok';
}

/* ---------- Denary -> Hex ---------- */
function decToHex(){
  const inEl=document.getElementById('decToHexIn'), out=document.getElementById('decToHexOut');
  let n = Number(inEl.value);
  if(inEl.value==='' || isNaN(n) || n<0){ out.textContent='Enter a non-negative integer.'; out.className='result err'; return; }
  let hx = decToHexString(Math.floor(n));
  out.textContent = `Denary ${n} → Hex ${hx}`;
  out.className='result ok';
}

/* ---------- Hex -> Denary ---------- */
function hexToDec(){
  const inEl=document.getElementById('hexToDecIn'), out=document.getElementById('hexToDecOut');
  let s = inEl.value.trim().toUpperCase();
  if(!s){ out.textContent='Enter a hex value.'; out.className='result err'; return; }
  if(!isHexString(s)){ out.textContent='Invalid hex input.'; out.className='result err'; return; }
  let val=0;
  for(let i=0;i<s.length;i++){
    val = val*16 + hexDigitToDec(s[i]);
  }
  out.textContent = `Hex ${s} → Denary ${val}`;
  out.className='result ok';
}

/* ---------- Color preview ---------- */
function previewColor(){
  const inEl=document.getElementById('colorIn'), box=document.getElementById('colorBox'), info=document.getElementById('colorInfo');
  let s = inEl.value.trim().replace('#','').toUpperCase();
  if(!s){ box.style.background='transparent'; info.textContent=''; return; }
  if(!/^[0-9A-F]{3}$|^[0-9A-F]{6}$/.test(s)){ info.textContent='Enter 3 or 6 hex digits only (e.g. FF9966 or F96).'; box.style.background='transparent'; return; }
  if(s.length===3) s = s.split('').map(ch=>ch+ch).join('');
  box.style.background = '#'+s;
  // compute denary RGB
  const r = parseInt(s.substr(0,2),16), g = parseInt(s.substr(2,2),16), b = parseInt(s.substr(4,2),16);
  info.textContent = `#${s} → RGB(${r}, ${g}, ${b})`;
}

/* ---------- Activities auto-check ---------- */
function check(inputId, correct){
  const inEl=document.getElementById(inputId), out=document.getElementById(inputId+'_out');
  let val = inEl.value.trim();
  if(val===''){ out.textContent=' Enter an answer.'; return; }
  // normalize for hex answers (case-insensitive, remove spaces)
  if(typeof correct === 'string'){
    if(val.replace(/\s+/g,'').toUpperCase() === correct.replace(/\s+/g,'').toUpperCase()){
      out.textContent=' ✓ Correct'; out.style.color='green';
    } else {
      out.textContent=' ✗ Incorrect'; out.style.color='crimson';
    }
  } else {
    // numeric
    if(Number(val) === Number(correct)){
      out.textContent=' ✓ Correct'; out.style.color='green';
    } else {
      out.textContent=' ✗ Incorrect'; out.style.color='crimson';
    }
  }
}

/* ---------- Convenience: keyboard enter handling ---------- */
document.addEventListener('keydown', (e)=>{
  if(e.key==='Enter'){
    // try to convert primary boxes if focused
    const active = document.activeElement;
    if(active && active.id==='binToDecIn'){ binToDec(); }
    if(active && active.id==='decToBinIn'){ decToBin(); }
    if(active && active.id==='binToHexIn'){ binToHex(); }
  }
});
</script>
</body>
</html>
